---
layout: post
title: APP COMPACTION 源码分析(kernel层)
---
### 前言：
上篇说到了framework层其实是通过在/proc/pid/reclaim下面写入full，或者some来进行reclaim，但是，这只是frameworks层的，那么kernel层的是什么样子的呢，我们书接上回。

### 读取：
既然我们知道了我们是在向proc中去写的，那么就可以去proc文件系统中可以找到：
```cpp
#ifdef CONFIG_PROCESS_RECLAIM
    REG("reclaim",0200,proc_reclaim_operations),
#endif
```
看到注册了reclaim节点的操作：proc_reclaim_operations,zl task_mmu.c中可以看到该操作的具体：
```cpp
const struct file_operations proc_reclaim_operations = {
    .write = reclaim_write,
    .llseek = noop_llseek,
}
```
可以看到在节点write事件后，会触发reclaim_write方法：
### reclaim_write方法
这个方法很是关键，因为具体的操作逻辑都是在这个地方的。
```CPP

```
